!function(a){"use strict";var b=function(b,c){this.options=a.extend({},a.fn.affix.defaults,c),this.$window=a(window).on("scroll.affix.data-api",a.proxy(this.checkPosition,this)),this.$element=a(b),this.checkPosition()};b.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var b=a(document).height(),c=this.$window.scrollTop(),d=this.$element.offset(),e=this.options.offset,f=e.bottom,g=e.top,h="affix affix-top affix-bottom",i;typeof e!="object"&&(f=g=e),typeof g=="function"&&(g=e.top()),typeof f=="function"&&(f=e.bottom()),i=this.unpin!=null&&c+this.unpin<=d.top?!1:f!=null&&d.top+this.$element.height()>=b-f?"bottom":g!=null&&c<=g?"top":!1;if(this.affixed===i)return;this.affixed=i,this.unpin=i=="bottom"?d.top-c:null,this.$element.removeClass(h).addClass("affix"+(i?"-"+i:""))},a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("affix"),f=typeof c=="object"&&c;e||d.data("affix",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.defaults={offset:0},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(window.jQuery),!function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function f(){e.trigger("closed").remove()}var c=a(this),d=c.attr("data-target"),e;d||(d=c.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),e=a(d),b&&b.preventDefault(),e.length||(e=c.hasClass("alert")?c:c.parent()),e.trigger(b=a.Event("close"));if(b.isDefaultPrevented())return;e.removeClass("in"),a.support.transition&&e.hasClass("fade")?e.on(a.support.transition.end,f):f()},a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("alert");e||d.data("alert",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.alert.Constructor=c,a(function(){a("body").on("click.alert.data-api",b,c.prototype.close)})}(window.jQuery),!function(a){function d(){e(a(b)).removeClass("open")}function e(b){var c=b.attr("data-target"),d;return c||(c=b.attr("href"),c=c&&c.replace(/.*(?=#[^\s]*$)/,"")),d=a(c),d.length||(d=b.parent()),d}"use strict";var b="[data-toggle=dropdown]",c=function(b){var c=a(b).on("click.dropdown.data-api",this.toggle);a("html").on("click.dropdown.data-api",function(){c.parent().removeClass("open")})};c.prototype={constructor:c,toggle:function(b){var c=a(this),f,g;if(c.is(".disabled, :disabled"))return;return f=e(c),g=f.hasClass("open"),d(),g||(f.toggleClass("open"),c.focus()),!1},keydown:function(b){var c,d,f,g,h,i;if(!/(38|40|27)/.test(b.keyCode))return;c=a(this),b.preventDefault(),b.stopPropagation();if(c.is(".disabled, :disabled"))return;g=e(c),h=g.hasClass("open");if(!h||h&&b.keyCode==27)return c.click();d=a("[role=menu] li:not(.divider) a",g);if(!d.length)return;i=d.index(d.filter(":focus")),b.keyCode==38&&i>0&&i--,b.keyCode==40&&i<d.length-1&&i++,~i||(i=0),d.eq(i).focus()}},a.fn.dropdown=function(b){return this.each(function(){var d=a(this),e=d.data("dropdown");e||d.data("dropdown",e=new c(this)),typeof b=="string"&&e[b].call(d)})},a.fn.dropdown.Constructor=c,a(function(){a("html").on("click.dropdown.data-api touchstart.dropdown.data-api",d),a("body").on("click.dropdown touchstart.dropdown.data-api",".dropdown",function(a){a.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",b,c.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",b+", [role=menu]",c.prototype.keydown)})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f;this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,this.options.trigger=="click"?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):this.options.trigger!="manual"&&(e=this.options.trigger=="hover"?"mouseenter":"focus",f=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this))),this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,b,this.$element.data()),b.delay&&typeof b.delay=="number"&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);if(!c.options.delay||!c.options.delay.show)return c.show();clearTimeout(this.timeout),c.hoverState="in",this.timeout=setTimeout(function(){c.hoverState=="in"&&c.show()},c.options.delay.show)},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);this.timeout&&clearTimeout(this.timeout);if(!c.options.delay||!c.options.delay.hide)return c.hide();c.hoverState="out",this.timeout=setTimeout(function(){c.hoverState=="out"&&c.hide()},c.options.delay.hide)},show:function(){var a,b,c,d,e,f,g;if(this.hasContent()&&this.enabled){a=this.tip(),this.setContent(),this.options.animation&&a.addClass("fade"),f=typeof this.options.placement=="function"?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,b=/in/.test(f),a.remove().css({top:0,left:0,display:"block"}).appendTo(b?this.$element:document.body),c=this.getPosition(b),d=a[0].offsetWidth,e=a[0].offsetHeight;switch(b?f.split(" ")[1]:f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}a.css(g).addClass(f).addClass("in")}},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function d(){var b=setTimeout(function(){c.off(a.support.transition.end).remove()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.remove()})}var b=this,c=this.tip();return c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d():c.remove(),this},fixTitle:function(){var a=this.$element;(a.attr("title")||typeof a.attr("data-original-title")!="string")&&a.attr("data-original-title",a.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(b){return a.extend({},b?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||(typeof c.title=="function"?c.title.call(b[0]):c.title),a},tip:function(){return this.$tip=this.$tip||a(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f=typeof c=="object"&&c;e||d.data("tooltip",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=this,c=a.Event("show");this.$element.trigger(c);if(this.isShown||c.isDefaultPrevented())return;a("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var c=a.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body),b.$element.show(),c&&b.$element[0].offsetWidth,b.$element.addClass("in").attr("aria-hidden",!1).focus(),b.enforceFocus(),c?b.$element.one(a.support.transition.end,function(){b.$element.trigger("shown")}):b.$element.trigger("shown")})},hide:function(b){b&&b.preventDefault();var c=this;b=a.Event("hide"),this.$element.trigger(b);if(!this.isShown||b.isDefaultPrevented())return;this.isShown=!1,a("body").removeClass("modal-open"),this.escape(),a(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var b=this;a(document).on("focusin.modal",function(a){b.$element[0]!==a.target&&!b.$element.has(a.target).length&&b.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(a){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(a.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),e?this.$backdrop.one(a.support.transition.end,b):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,a.proxy(this.removeBackdrop,this)):this.removeBackdrop()):b&&b()}},a.fn.modal=function(c){return this.each(function(){var d=a(this),e=d.data("modal"),f=a.extend({},a.fn.modal.defaults,d.data(),typeof c=="object"&&c);e||d.data("modal",e=new b(this,f)),typeof c=="string"?e[c]():f.show&&e.show()})},a.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},a.fn.modal.Constructor=b,a(function(){a("body").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})})}(window.jQuery),!function(a){a(function(){"use strict",a.support.transition=function(){var a=function(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)if(a.style[c]!==undefined)return b[c]}();return a&&{end:a}}()})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.button.defaults,c)};b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.data(),e=c.is("input")?"val":"html";a+="Text",d.resetText||c.data("resetText",c[e]()),c[e](d[a]||this.options[a]),setTimeout(function(){a=="loadingText"?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.parent('[data-toggle="buttons-radio"]');a&&a.find(".active").removeClass("active"),this.$element.toggleClass("active")},a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("button"),f=typeof c=="object"&&c;e||d.data("button",e=new b(this,f)),c=="toggle"?e.toggle():c&&e.setState(c)})},a.fn.button.defaults={loadingText:"loading..."},a.fn.button.Constructor=b,a(function(){a("body").on("click.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle")})})}(window.jQuery),!function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype,{constructor:b,setContent:function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content > *")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-content")||(typeof c.content=="function"?c.content.call(b[0]):c.content),a},tip:function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("popover"),f=typeof c=="object"&&c;e||d.data("popover",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.defaults=a.extend({},a.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.typeahead.defaults,c),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=a(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};b.prototype={constructor:b,select:function(){var a=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(a)).change(),this.hide()},updater:function(a){return a},show:function(){var b=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:b.top+b.height,left:b.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(b){var c;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(c=a.isFunction(this.source)?this.source(this.query,a.proxy(this.process,this)):this.source,c?this.process(c):this)},process:function(b){var c=this;return b=a.grep(b,function(a){return c.matcher(a)}),b=this.sorter(b),b.length?this.render(b.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(a){return~a.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(a){var b=[],c=[],d=[],e;while(e=a.shift())e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?c.push(e):d.push(e):b.push(e);return b.concat(c,d)},highlighter:function(a){var b=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return a.replace(new RegExp("("+b+")","ig"),function(a,b){return"<strong>"+b+"</strong>"})},render:function(b){var c=this;return b=a(b).map(function(b,d){return b=a(c.options.item).attr("data-value",d),b.find("a").html(c.highlighter(d)),b[0]}),b.first().addClass("active"),this.$menu.html(b),this},next:function(b){var c=this.$menu.find(".active").removeClass("active"),d=c.next();d.length||(d=a(this.$menu.find("li")[0])),d.addClass("active")},prev:function(a){var b=this.$menu.find(".active").removeClass("active"),c=b.prev();c.length||(c=this.$menu.find("li").last()),c.addClass("active")},listen:function(){this.$element.on("blur",a.proxy(this.blur,this)).on("keypress",a.proxy(this.keypress,this)).on("keyup",a.proxy(this.keyup,this)),(a.browser.webkit||a.browser.msie)&&this.$element.on("keydown",a.proxy(this.keydown,this)),this.$menu.on("click",a.proxy(this.click,this)).on("mouseenter","li",a.proxy(this.mouseenter,this))},move:function(a){if(!this.shown)return;switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:a.preventDefault(),this.prev();break;case 40:a.preventDefault(),this.next()}a.stopPropagation()},keydown:function(b){this.suppressKeyPressRepeat=!~a.inArray(b.keyCode,[40,38,9,13,27]),this.move(b)},keypress:function(a){if(this.suppressKeyPressRepeat)return;this.move(a)},keyup:function(a){switch(a.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation(),a.preventDefault()},blur:function(a){var b=this;setTimeout(function(){b.hide()},150)},click:function(a){a.stopPropagation(),a.preventDefault(),this.select()},mouseenter:function(b){this.$menu.find(".active").removeClass("active"),a(b.currentTarget).addClass("active")}},a.fn.typeahead=function(c){return this.each(function(){var d=a(this),e=d.data("typeahead"),f=typeof c=="object"&&c;e||d.data("typeahead",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},a.fn.typeahead.Constructor=b,a(function(){a("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(b){var c=a(this);if(c.data("typeahead"))return;b.preventDefault(),c.typeahead(c.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){return b||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},to:function(b){var c=this.$element.find(".item.active"),d=c.parent().children(),e=d.index(c),f=this;if(b>d.length-1||b<0)return;return this.sliding?this.$element.one("slid",function(){f.to(b)}):e==b?this.pause().cycle():this.slide(b>e?"next":"prev",a(d[b]))},pause:function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g=b=="next"?"left":"right",h=b=="next"?"first":"last",i=this,j=a.Event("slide",{relatedTarget:e[0]});this.sliding=!0,f&&this.pause(),e=e.length?e:this.$element.find(".item")[h]();if(e.hasClass("active"))return;if(a.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(j);if(j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),this.$element.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)})}else{this.$element.trigger(j);if(j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}},a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("carousel"),f=a.extend({},a.fn.carousel.defaults,typeof c=="object"&&c),g=typeof c=="string"?c:f.slide;e||d.data("carousel",e=new b(this,f)),typeof c=="number"?e.to(c):g?e[g]():f.interval&&e.cycle()})},a.fn.carousel.defaults={interval:5e3,pause:"hover"},a.fn.carousel.Constructor=b,a(function(){a("body").on("click.carousel.data-api","[data-slide]",function(b){var c=a(this),d,e=a(c.attr("data-target")||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,"")),f=!e.data("modal")&&a.extend({},e.data(),c.data());e.carousel(f),b.preventDefault()})})}(window.jQuery),!function(a){function b(b,c){var d=a.proxy(this.process,this),e=a(b).is("body")?a(window):a(b),f;this.options=a.extend({},a.fn.scrollspy.defaults,c),this.$scrollElement=e.on("scroll.scroll-spy.data-api",d),this.selector=(this.options.target||(f=a(b).attr("href"))&&f.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=a("body"),this.refresh(),this.process()}"use strict",b.prototype={constructor:b,refresh:function(){var b=this,c;this.offsets=a([]),this.targets=a([]),c=this.$body.find(this.selector).map(function(){var b=a(this),c=b.data("target")||b.attr("href"),d=/^#\w/.test(c)&&a(c);return d&&d.length&&[[d.position().top,c]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},process:function(){var a=this.$scrollElement.scrollTop()+this.options.offset,b=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,c=b-this.$scrollElement.height(),d=this.offsets,e=this.targets,f=this.activeTarget,g;if(a>=c)return f!=(g=e.last()[0])&&this.activate(g);for(g=d.length;g--;)f!=e[g]&&a>=d[g]&&(!d[g+1]||a<=d[g+1])&&this.activate(e[g])},activate:function(b){var c,d;this.activeTarget=b,a(this.selector).parent(".active").removeClass("active"),d=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',c=a(d).parent("li").addClass("active"),c.parent(".dropdown-menu").length&&(c=c.closest("li.dropdown").addClass("active")),c.trigger("activate")}},a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("scrollspy"),f=typeof c=="object"&&c;e||d.data("scrollspy",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.defaults={offset:10},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(window.jQuery),!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.collapse.defaults,c),this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.prototype={constructor:b,dimension:function(){var a=this.$element.hasClass("width");return a?"width":"height"},show:function(){var b,c,d,e;if(this.transitioning)return;b=this.dimension(),c=a.camelCase(["scroll",b].join("-")),d=this.$parent&&this.$parent.find("> .accordion-group > .in");if(d&&d.length){e=d.data("collapse");if(e&&e.transitioning)return;d.collapse("hide"),e||d.data("collapse",null)}this.$element[b](0),this.transition("addClass",a.Event("show"),"shown"),a.support.transition&&this.$element[b](this.$element[0][c])},hide:function(){var b;if(this.transitioning)return;b=this.dimension(),this.reset(this.$element[b]()),this.transition("removeClass",a.Event("hide"),"hidden"),this.$element[b](0)},reset:function(a){var b=this.dimension();return this.$element.removeClass("collapse")[b](a||"auto")[0].offsetWidth,this.$element[a!==null?"addClass":"removeClass"]("collapse"),this},transition:function(b,c,d){var e=this,f=function(){c.type=="show"&&e.reset(),e.transitioning=0,e.$element.trigger(d)};this.$element.trigger(c);if(c.isDefaultPrevented())return;this.transitioning=1,this.$element[b]("in"),a.support.transition&&this.$element.hasClass("collapse")?this.$element.one(a.support.transition.end,f):f()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("collapse"),f=typeof c=="object"&&c;e||d.data("collapse",e=new b(this,f)),typeof c=="string"&&e[c]()})},a.fn.collapse.defaults={toggle:!0},a.fn.collapse.Constructor=b,a(function(){a("body").on("click.collapse.data-api","[data-toggle=collapse]",function(b){var c=a(this),d,e=c.attr("data-target")||b.preventDefault()||(d=c.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=a(e).data("collapse")?"toggle":c.data();c[a(e).hasClass("in")?"addClass":"removeClass"]("collapsed"),a(e).collapse(f)})})}(window.jQuery),!function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype={constructor:b,show:function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.attr("data-target"),e,f,g;d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,""));if(b.parent("li").hasClass("active"))return;e=c.find(".active a").last()[0],g=a.Event("show",{relatedTarget:e}),b.trigger(g);if(g.isDefaultPrevented())return;f=a(d),this.activate(b.parent("li"),c),this.activate(f,f.parent(),function(){b.trigger({type:"shown",relatedTarget:e})})},activate:function(b,c,d){function g(){e.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),f?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var e=c.find("> .active"),f=d&&a.support.transition&&e.hasClass("fade");f?e.one(a.support.transition.end,g):g(),e.removeClass("in")}},a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("tab");e||d.data("tab",e=new b(this)),typeof c=="string"&&e[c]()})},a.fn.tab.Constructor=b,a(function(){a("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})})}(window.jQuery),function(a){function b(a,b){if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveStart("character",a),c.moveEnd("character",b-a),c.select()}else this.setSelectionRange&&(this.focus(),this.setSelectionRange(a,b))}function c(a){var b=this.value.length;a=a.toLowerCase()=="start"?"Start":"End";if(document.selection){b=document.selection.createRange();var c;return c=b.duplicate(),c.expand("textedit"),c.setEndPoint("EndToEnd",b),c=c.text.length-b.text.length,b=c+b.text.length,a=="Start"?c:b}return typeof this["selection"+a]!="undefined"&&(b=this["selection"+a]),b}var d={codes:{188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};a.fn.number=function(e,f,g,i){i=typeof i=="undefined"?",":i,g=typeof g=="undefined"?".":g,f=typeof f=="undefined"?0:f;var j="\\u"+("0000"+g.charCodeAt(0).toString(16)).slice(-4),k=RegExp("[^"+j+"0-9]","g"),l=RegExp(j,"g");return e===!0?this.is("input:text")?this.on({"keydown.format":function(e){var j=a(this),m=j.data("numFormat"),p=e.keyCode?e.keyCode:e.which,t="",u=c.apply(this,["start"]),v=c.apply(this,["end"]),w="";w=!1,d.codes.hasOwnProperty(p)&&(p=d.codes[p]),!e.shiftKey&&p>=65&&p<=90?p+=32:!e.shiftKey&&p>=69&&p<=105?p-=48:e.shiftKey&&d.shifts.hasOwnProperty(p)&&(t=d.shifts[p]),t==""&&(t=String.fromCharCode(p));if(p!==8&&t!=g&&!t.match(/[0-9]/)){j=e.keyCode?e.keyCode:e.which;if(j==46||j==8||j==9||j==27||j==13||(j==65||j==82)&&(e.ctrlKey||e.metaKey)===!0||j>=35&&j<=39)return;return e.preventDefault(),!1}(u==0&&v==this.value.length||j.val()==0)&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&t.length===1&&t!=0?(u=v=1,this.value="",m.init=f>0?-1:0,m.c=f>0?-(f+1):0,b.apply(this,[0,0])):m.c=v-this.value.length;if(f>0&&t==g&&u==this.value.length-f-1)m.c++,m.init=Math.max(0,m.init),e.preventDefault(),w=this.value.length+m.c;else if(t==g)m.init=Math.max(0,m.init),e.preventDefault();else if(f>0&&p==8&&u==this.value.length-f)e.preventDefault(),m.c--,w=this.value.length+m.c;else if(f>0&&p==8&&u>this.value.length-f){if(this.value==="")return;this.value.slice(u-1,u)!="0"&&(w=this.value.slice(0,u-1)+"0"+this.value.slice(u),j.val(w.replace(k,"").replace(l,g))),e.preventDefault(),m.c--,w=this.value.length+m.c}else p==8&&this.value.slice(u-1,u)==i?(e.preventDefault(),m.c--,w=this.value.length+m.c):f>0&&u==v&&this.value.length>f+1&&u>this.value.length-f-1&&isFinite(+t)&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&t.length===1&&(this.value=w=v===this.value.length?this.value.slice(0,u-1):this.value.slice(0,u)+this.value.slice(u+1),w=u);w!==!1&&b.apply(this,[w,w]),j.data("numFormat",m)},"keyup.format":function(d){var e=a(this),g=e.data("numFormat");d=d.keyCode?d.keyCode:d.which;var i=c.apply(this,["start"]);this.value===""||(d<48||d>57)&&(d<96||d>105)&&d!==8||(e.val(e.val()),f>0&&(g.init<1?(i=this.value.length-f-(g.init<0?1:0),g.c=i-this.value.length,g.init=1,e.data("numFormat",g)):i>this.value.length-f&&d!=8&&(g.c++,e.data("numFormat",g))),e=this.value.length+g.c,b.apply(this,[e,e]))},"paste.format":function(b){var c=a(this),d=b.originalEvent,e=null;return window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):d.clipboardData&&d.clipboardData.getData&&(e=d.clipboardData.getData("text/plain")),c.val(e),b.preventDefault(),!1}}).each(function(){var b=a(this).data("numFormat",{c:-(f+1),decimals:f,thousands_sep:i,dec_point:g,regex_dec_num:k,regex_dec:l,init:!1});this.value!==""&&b.val(b.val())}):this.each(function(){var b=a(this),c=+b.text().replace(k,"").replace(l,".");b.number(isFinite(c)?+c:0,f,g,i)}):this.text(a.number.apply(window,arguments))};var e=null,f=null;a.valHooks.text?(e=a.valHooks.text.get,f=a.valHooks.text.set):a.valHooks.text={},a.valHooks.text.get=function(b){var c=a(b).data("numFormat");if(c)return b.value===""?"":(b=+b.value.replace(c.regex_dec_num,"").replace(c.regex_dec,"."),""+(isFinite(b)?b:0));if(a.isFunction(e))return e(b)},a.valHooks.text.set=function(b,c){var d=a(b).data("numFormat");if(d)return b.value=a.number(c,d.decimals,d.dec_point,d.thousands_sep);if(a.isFunction(f))return f(b,c)},a.number=function(a,b,c,d){d=typeof d=="undefined"?",":d,c=typeof c=="undefined"?".":c,b=isFinite(+b)?Math.abs(b):0;var e="\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4);return a=(a+"").replace(RegExp(e,"g"),".").replace(RegExp("[^0-9+-Ee.]","g"),""),a=isFinite(+a)?+a:0,e="",e=function(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c},e=(b?e(a,b):""+Math.round(a)).split("."),e[0].length>3&&(e[0]=e[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d)),(e[1]||"").length<b&&(e[1]=e[1]||"",e[1]+=Array(b-e[1].length+1).join("0")),e.join(c)}}(jQuery),function(a){a.normalizeWhitespace=function(a){if(a){var b=a.replace(/,(\S)/gi,", $1");return b=b.replace(/(\S)&(\S)/gi,"$1 & $2"),b}}}(jQuery),jQuery(function(a){a.extend({serializeJSON:function(b){var c=typeof b;if(c!="object"||b===null)return c=="string"&&(b='"'+b+'"'),String(b);var d=[],e=b&&b.constructor==Array;return a.each(b,function(b,f){c=typeof f,c=="string"?f='"'+f+'"':c=="object"&f!==null&&(f=a.serializeJSON(f)),d.push((e?"":'"'+b+'":')+String(f))}),(e?"[":"{")+String(d)+(e?"]":"}")}})}),function(a){a(function(){function a(){}function b(b){var d=new a;return d.then=function(a){var d;try{return a&&(d=a(b)),h(d===w?b:d)}catch(e){return c(e)}},t(d)}function c(b){var d=new a;return d.then=function(a,d){var e;try{return d?(e=d(b),h(e===w?b:e)):c(b)}catch(f){return c(f)}},t(d)}function d(a){return g(a,function(a){return c(a)})}function e(){function d(a,b,c){return m(a,b,c)}function f(a){o(b(a))}function g(a){o(c(a))}function h(a){n(a)}var i,j,k,l,m,n,o;return k=[],l=[],m=function(a,b,c){var d=e();return k.push(function(c){c.then(a,b).then(d.resolve,d.reject,d.progress)}),c&&l.push(c),d.promise},n=function(a){var b,c=0;while(b=l[c++])b(a)},o=function(a){var b,c=0;m=a.then,o=n=function(){throw new Error("already completed")},l=w;while(b=k[c++])b(a);k=[]},i={},j=new a,j.then=i.then=d,i.promise=t(j),i.resolver=t({resolve:i.resolve=f,reject:i.reject=g,progress:i.progress=h}),i}function f(a){return a&&typeof a.then=="function"}function g(a,b,c,d){var e=h(a);return e.then(b,c,d)}function h(b){var c,d;return b instanceof a?c=b:(d=e(),f(b)?(b.then(d.resolve,d.reject,d.progress),c=d.promise):(d.resolve(b),c=d.promise)),c}function i(a,b,c,d,f){return r(2,arguments),g(a,function(a){function h(a){p(a)}function i(a){q(a)}function j(a){r(a)}function k(){p=q=r=s}var l,m,n,o,p,q,r,t,u;t=a.length>>>0,l=Math.max(0,Math.min(b,t)),m=[],o=e(),n=g(o,c,d,f);if(!l)o.resolve(m);else{p=function(a){m.push(a),--l||(k(),o.resolve(m))},q=function(a){k(),o.reject(a)},r=o.progress;for(u=0;u<t;++u)u in a&&g(a[u],h,i,j)}return n})}function j(a,b,c,d){return r(1,arguments),g(a,function(a){return p(a,k,[])}).then(b,c,d)}function k(a,b,c){return a[c]=b,a}function l(a,b,c,d){function e(a){return b?b(a[0]):a[0]}return i(a,1,e,c,d)}function m(a,b){return g(a,function(a){return n(a,b)})}function n(a,b){var c,d,e;d=a.length>>>0,c=new Array(d);for(e=0;e<d;e++)e in a&&(c[e]=g(a[e],b));return p(c,k,c)}function o(a,b,c){var d=v.call(arguments,1);return g(a,function(a){return p.apply(w,[a].concat(d))})}function p(a,b,c){var d,e;return d=a.length,e=[function(a,c,e){return g(a,function(a){return g(c,function(c){return b(a,c,e,d)})})}],arguments.length>2&&e.push(c),u.apply(a,e)}function q(a,b,d){var e=arguments.length>2;return g(a,function(a){return e&&(a=d),b.resolve(a),a},function(a){return b.reject(a),c(a)},b.progress)}function r(a,b){var c,d=b.length;while(d>a){c=b[--d];if(c!=null&&typeof c!="function")throw new Error("callback is not a function")}}function s(){}var t,u,v,w;return g.defer=e,g.reject=d,g.isPromise=f,g.all=j,g.some=i,g.any=l,g.map=m,g.reduce=o,g.chain=q,t=Object.freeze||function(a){return a},a.prototype=t({always:function(a,b){return this.then(a,a,b)},otherwise:function(a){return this.then(w,a)}}),v=[].slice,u=[].reduce||function(a){var b,c,d,e,f;f=0,b=Object(this),e=b.length>>>0,c=arguments;if(c.length<=1)for(;;){if(f in b){d=b[f++];break}if(++f>=e)throw new TypeError}else d=c[1];for(;f<e;++f)f in b&&(d=a(d,b[f],f,b));return d},g})}(typeof define=="function"?define:function(a){typeof module!="undefined"?module.exports=a():jQuery.mapster_when=a()}),function($){$.fn.mapster=function(a){var b=$.mapster.impl;if($.isFunction(b[a]))return b[a].apply(this,Array.prototype.slice.call(arguments,1));if(typeof a=="object"||!a)return b.bind.apply(this,arguments);$.error("Method "+a+" does not exist on jQuery.mapster")},$.mapster={version:"1.2.11",render_defaults:{isSelectable:!0,isDeselectable:!0,fade:!1,fadeDuration:150,fill:!0,fillColor:"000000",fillColorMask:"FFFFFF",fillOpacity:.7,highlight:!0,stroke:!1,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,includeKeys:"",altImage:null,altImageId:null,altImages:{}},defaults:{clickNavigate:!1,wrapClass:null,wrapCss:null,onGetList:null,sortList:!1,listenToList:!1,mapKey:"",mapValue:"",singleSelect:!1,listKey:"value",listSelectedAttribute:"selected",listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:3e4,noHrefIsMask:!0,scaleMap:!0,safeLoad:!1,areas:[]},shared_defaults:{render_highlight:{fade:!0},render_select:{fade:!1},staticState:null,selected:null},area_defaults:{includeKeys:"",isMask:!1},canvas_style:{position:"absolute",left:0,top:0,padding:0,border:0},hasCanvas:null,isTouch:null,map_cache:[],hooks:{},addHook:function(a,b){this.hooks[a]=(this.hooks[a]||[]).push(b)},callHooks:function(a,b){$.each(this.hooks[a]||[],function(a,c){c.apply(b)})},utils:{when:$.mapster_when,defer:$.mapster_when.defer,subclass:function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments,0);c.base=a.prototype,c.base.init=function(){a.prototype.constructor.apply(c,d)},b.apply(c,d)};return c.prototype=new a,c.prototype.constructor=c,c},asArray:function(a){return a.constructor===Array?a:this.split(a)},split:function(a,b){var c,d,e=a.split(",");for(c=0;c<e.length;c++)d=$.trim(e[c]),d===""?e.splice(c,1):e[c]=b?b(d):d;return e},updateProps:function(a,b){var c,d=a||{},e=$.isEmptyObject(d)?b:a;return c=[],$.each(e,function(a){c.push(a)}),$.each(Array.prototype.slice.call(arguments,1),function(a,b){$.each(b||{},function(a){if(!c||$.inArray(a,c)>=0){var e=b[a];$.isPlainObject(e)?d[a]=$.extend(d[a]||{},e):e&&e.constructor===Array?d[a]=e.slice(0):typeof e!="undefined"&&(d[a]=b[a])}})}),d},isElement:function(a){return typeof HTMLElement=="object"?a instanceof HTMLElement:a&&typeof a=="object"&&a.nodeType===1&&typeof a.nodeName=="string"},indexOfProp:function(a,b,c){var d=a.constructor===Array?-1:null;return $.each(a,function(a,e){if(e&&(b?e[b]:e)===c)return d=a,!1}),d},boolOrDefault:function(a,b){return this.isBool(a)?a:b||!1},isBool:function(a){return typeof a=="boolean"},isUndef:function(a){return typeof a=="undefined"},ifFunction:function(a,b,c){$.isFunction(a)&&a.call(b,c)},size:function(a,b){var c=$.mapster.utils;return{width:b?a.width||a.naturalWidth:c.imgWidth(a,!0),height:b?a.height||a.naturalHeight:c.imgHeight(a,!0),complete:function(){return!!this.height&&!!this.width}}},setOpacity:function(a,b){$.mapster.hasCanvas()?a.style.opacity=b:$(a).each(function(a,c){typeof c.opacity!="undefined"?c.opacity=b:$(c).css("opacity",b)})},fader:function(){var a={},b=0,c=function(d,f,g,h){var i,j=h/15,k,l=$.mapster.utils;if(typeof d=="number"){k=a[d];if(!k)return}else i=l.indexOfProp(a,null,d),i&&delete a[i],a[++b]=k=d,d=b;g=g||1,f=f+g/j>g-.01?g:f+g/j,l.setOpacity(k,f),f<g&&setTimeout(function(){c(d,f,g,h)},15)};return c}()},getBoundList:function(a,b){if(!a.boundList)return null;var c,d,e=$(),f=$.mapster.utils.split(b);return a.boundList.each(function(b,g){for(c=0;c<f.length;c++)d=f[c],$(g).is("["+a.listKey+'="'+d+'"]')&&(e=e.add(g))}),e},setBoundListProperties:function(a,b,c){b.each(function(b,d){a.listSelectedClass&&(c?$(d).addClass(a.listSelectedClass):$(d).removeClass(a.listSelectedClass)),a.listSelectedAttribute&&$(d).attr(a.listSelectedAttribute,c)})},getMapDataIndex:function(a){var b,c;switch(a.tagName&&a.tagName.toLowerCase()){case"area":c=$(a).parent().attr("name"),b=$("img[usemap='#"+c+"']")[0];break;case"img":b=a}return b?this.utils.indexOfProp(this.map_cache,"image",b):-1},getMapData:function(a){var b=this.getMapDataIndex(a.length?a[0]:a);if(b>=0)return b>=0?this.map_cache[b]:null},queueCommand:function(a,b,c,d){return a?!a.complete||a.currentAction?(a.commands.push({that:b,command:c,args:d}),!0):!1:!1},unload:function(){this.impl.unload(),this.utils=null,this.impl=null,$.fn.mapster=null,$.mapster=null,$("*").unbind()}};var m=$.mapster,u=m.utils,ap=Array.prototype;$.each(["width","height"],function(a,b){var c=b.substr(0,1).toUpperCase()+b.substr(1);u["img"+c]=function(a,d){return(d?$(a)[b]():0)||a[b]||a["natural"+c]||a["client"+c]||a["offset"+c]}}),m.Method=function(a,b,c,d){var e=this;e.name=d.name,e.output=a,e.input=a,e.first=d.first||!1,e.args=d.args?ap.slice.call(d.args,0):[],e.key=d.key,e.func_map=b,e.func_area=c,e.name=d.name,e.allowAsync=d.allowAsync||!1},m.Method.prototype={constructor:m.Method,go:function(){var a,b,c,d,e,f=this.input,g=[],h=this;d=f.length;for(a=0;a<d;a++){b=$.mapster.getMapData(f[a]);if(b){if(!h.allowAsync&&m.queueCommand(b,h.input,h.name,h.args)){this.first&&(e="");continue}c=b.getData(f[a].nodeName==="AREA"?f[a]:this.key),c?$.inArray(c,g)<0&&g.push(c):e=this.func_map.apply(b,h.args);if(this.first||typeof e!="undefined")break}}return $(g).each(function(a,b){e=h.func_area.apply(b,h.args)}),typeof e!="undefined"?e:this.output}},$.mapster.impl=function(){function hasVml(){var a=$("<div />").appendTo("body");a.html('<v:shape id="vml_flag1" adj="1" />');var b=a[0].firstChild;b.style.behavior="url(#default#VML)";var c=b?typeof b.adj=="object":!0;return a.remove(),c}function namespaces(){return typeof document.namespaces=="object"?document.namespaces:null}function hasCanvas(){var a=namespaces();return a&&a.g_vml_?!1:$("<canvas />")[0].getContext?!0:!1}function merge_areas(a,b){var c,d,e=a.options.areas;b&&$.each(b,function(b,f){if(!f||!f.key)return;d=u.indexOfProp(e,"key",f.key),d>=0?$.extend(e[d],f):e.push(f),c=a.getDataForKey(f.key),c&&$.extend(c.options,f)})}function merge_options(a,b){var c=u.updateProps({},b);delete c.areas,u.updateProps(a.options,c),merge_areas(a,b.areas),u.updateProps(a.area_options,a.options)}var me={},addMap=function(a){return m.map_cache.push(a)-1},removeMap=function(a){m.map_cache.splice(a.index,1);for(var b=m.map_cache.length-1;b>=this.index;b--)m.map_cache[b].index--};return me.get=function(a){var b=m.getMapData(this);if(!b||!b.complete)throw"Can't access data until binding complete.";return(new m.Method(this,function(){return this.getSelected()},function(){return this.isSelected()},{name:"get",args:arguments,key:a,first:!0,allowAsync:!0,defaultReturn:""})).go()},me.data=function(a){return(new m.Method(this,null,function(){return this},{name:"data",args:arguments,key:a})).go()},me.highlight=function(a){return(new m.Method(this,function(){if(a!==!1){var b=this.highlightId;return b>=0?this.data[b].key:null}this.ensureNoHighlight()},function(){this.highlight()},{name:"highlight",args:arguments,key:a,first:!0})).go()},me.keys=function(a,b){function c(a){var c,e=[];b?(c=a.areas(),$.each(c,function(a,b){e=e.concat(b.keys)})):e.push(a.key),$.each(e,function(a,b){$.inArray(b,d)<0&&d.push(b)})}var d=[],e=m.getMapData(this);if(!e||!e.complete)throw"Can't access data until binding complete.";return!e||!e.complete?"":(typeof a=="string"?b?c(e.getDataForKey(a)):d=[e.getKeysForGroup(a)]:(b=a,this.each(function(a,b){b.nodeName==="AREA"&&c(e.getDataForArea(b))})),d.join(","))},me.select=function(){me.set.call(this,!0)},me.deselect=function(){me.set.call(this,!1)},me.set=function(a,b,c){function d(b){if(b)switch(a){case!0:b.select(i);break;case!1:b.deselect(!0);break;default:a=b.toggle(i)}}function e(a){a&&$.inArray(a,k)<0&&(k.push(a),j+=(j===""?"":",")+a.key)}function f(b){$.each(k,function(a,b){d(b)}),a||b.removeSelectionFinish(),b.options.boundList&&m.setBoundListProperties(b.options,m.getBoundList(b.options,j),a)}var g,h,i=c,j,k;return this.filter("img,area").each(function(c,d){var n;h=m.getMapData(d),h!==g&&(g&&f(g),k=[],j=""),h&&(n="",d.nodeName.toUpperCase()==="IMG"?m.queueCommand(h,$(d),"set",[a,b,i])||(b instanceof Array?b.length&&(n=b.join(",")):n=b,n&&$.each(u.split(n),function(a,b){e(h.getDataForKey(b.toString())),g=h})):(i=b,m.queueCommand(h,$(d),"set",[a,i])||(e(h.getDataForArea(d)),g=h)))}),h&&f(h),this},me.unbind=function(a){return(new m.Method(this,function(){this.clearEvents(),this.clearMapData(a),removeMap(this)},null,{name:"unbind",args:arguments})).go()},me.rebind=function(a){return(new m.Method(this,function(){var b=this;b.complete=!1,b.configureOptions(a),b.bindImages().then(function(){b.buildDataset(!0),b.complete=!0})},null,{name:"rebind",args:arguments})).go()},me.get_options=function(a,b){var c=u.isBool(a)?a:b;return(new m.Method(this,function(){var a=$.extend({},this.options);return c&&(a.render_select=u.updateProps({},m.render_defaults,a,a.render_select),a.render_highlight=u.updateProps({},m.render_defaults,a,a.render_highlight)),a},function(){return c?this.effectiveOptions():this.options},{name:"get_options",args:arguments,first:!0,allowAsync:!0,key:a})).go()},me.set_options=function(a){return(new m.Method(this,function(){merge_options(this,a)},null,{name:"set_options",args:arguments})).go()},me.unload=function(){var a;for(a=m.map_cache.length-1;a>=0;a--)m.map_cache[a]&&me.unbind.call($(m.map_cache[a].image));me.graphics=null},me.snapshot=function(){return(new m.Method(this,function(){$.each(this.data,function(a,b){b.selected=!1}),this.base_canvas=this.graphics.createVisibleCanvas(this),$(this.image).before(this.base_canvas)},null,{name:"snapshot"})).go()},me.state=function(){var a,b=null;return $(this).each(function(c,d){if(d.nodeName==="IMG")return a=m.getMapData(d),a&&(b=a.state()),!1}),b},me.bind=function(a){return this.each(function(b,c){var d,f,g,h;d=$(c),h=m.getMapData(c);if(h){me.unbind.apply(d);if(!h.complete)return d.bind(),!0;h=null}g=this.getAttribute("usemap"),f=g&&$('map[name="'+g.substr(1)+'"]');if(!(d.is("img")&&g&&f.size()>0))return!0;d.css("border",0),h||(h=new m.MapData(this,a),h.index=addMap(h),h.map=f,h.bindImages().then(function(){h.initialize()}))})},me.init=function(a){var b,c;m.hasCanvas=function(){return u.isBool(m.hasCanvas.value)||(m.hasCanvas.value=u.isBool(a)?a:hasCanvas()),m.hasCanvas.value},m.hasVml=function(){if(!u.isBool(m.hasVml.value)){var a=namespaces();a&&!a.v&&(a.add("v","urn:schemas-microsoft-com:vml"),b=document.createStyleSheet(),c=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"],$.each(c,function(a,c){b.addRule("v\\:"+c,"behavior: url(#default#VML); antialias:true")})),m.hasVml.value=hasVml()}return m.hasVml.value},m.isTouch=!!document.documentElement.ontouchstart,$.extend(m.defaults,m.render_defaults,m.shared_defaults),$.extend(m.area_defaults,m.render_defaults,m.shared_defaults)},me.test=function(obj){return eval(obj)},me}(),$.mapster.impl.init()}(jQuery),function(a){function b(b,c,d){var e=b,f=e.map_data,g=d.isMask;a.each(c.areas(),function(a,b){d.isMask=g||b.nohref&&f.options.noHrefIsMask,e.addShape(b,d)}),d.isMask=g}function c(a){return Math.max(0,Math.min(parseInt(a,16),255))}function d(a,b){return"rgba("+c(a.substr(0,2))+","+c(a.substr(2,2))+","+c(a.substr(4,2))+","+b+")"}function e(){}var f,g=a.mapster,h=g.utils,i,j;g.Graphics=function(a){var b=this;b.active=!1,b.canvas=null,b.width=0,b.height=0,b.shapes=[],b.masks=[],b.map_data=a},f=g.Graphics.prototype={constructor:g.Graphics,begin:function(b,c){var d=a(b);this.elementName=c,this.canvas=b,this.width=d.width(),this.height=d.height(),this.shapes=[],this.masks=[],this.active=!0},addShape:function(a,b){var c=b.isMask?this.masks:this.shapes;c.push({mapArea:a,options:b})},createVisibleCanvas:function(b){return a(this.createCanvasFor(b)).addClass("mapster_el").css(g.canvas_style)[0]},addShapeGroup:function(c,d,e){var f=this,i,j,k,l=this.map_data,m=c.effectiveRenderOptions(d);e&&a.extend(m,e),d==="select"?(j="static_"+c.areaId.toString(),k=l.base_canvas):k=l.overlay_canvas,f.begin(k,j),m.includeKeys&&(i=h.split(m.includeKeys),a.each(i,function(a,c){var e=l.getDataForKey(c.toString());b(f,e,e.effectiveRenderOptions(d))})),b(f,c,m),f.render(),m.fade&&h.fader(g.hasCanvas()?k:a(k).find("._fill").not(".mapster_mask"),0,g.hasCanvas()?1:m.fillOpacity,m.fadeDuration)}},i={renderShape:function(a,b,c){var d,e=b.coords(null,c);switch(b.shape){case"rect":a.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]);break;case"poly":a.moveTo(e[0],e[1]);for(d=2;d<b.length;d+=2)a.lineTo(e[d],e[d+1]);a.lineTo(e[0],e[1]);break;case"circ":case"circle":a.arc(e[0],e[1],e[2],0,Math.PI*2,!1)}},addAltImage:function(a,b,c,d){a.beginPath(),this.renderShape(a,c),a.closePath(),a.clip(),a.globalAlpha=d.altImageOpacity||d.fillOpacity,a.drawImage(b,0,0,c.owner.scaleInfo.width,c.owner.scaleInfo.height)},render:function(){var b,c,e=this,f=e.map_data,g=e.masks.length,h=e.createCanvasFor(f),i=h.getContext("2d"),j=e.canvas.getContext("2d");return g&&(b=e.createCanvasFor(f),c=b.getContext("2d"),c.clearRect(0,0,b.width,b.height),a.each(e.masks,function(a,b){c.save(),c.beginPath(),e.renderShape(c,b.mapArea),c.closePath(),c.clip(),c.lineWidth=0,c.fillStyle="#000",c.fill(),c.restore()})),a.each(e.shapes,function(a,b){i.save(),b.options.fill&&(b.options.altImageId?e.addAltImage(i,f.images[b.options.altImageId],b.mapArea,b.options):(i.beginPath(),e.renderShape(i,b.mapArea),i.closePath(),i.fillStyle=d(b.options.fillColor,b.options.fillOpacity),i.fill())),i.restore()}),a.each(e.shapes.concat(e.masks),function(a,b){var c=b.options.strokeWidth===1?.5:0;b.options.stroke&&(i.save(),i.strokeStyle=d(b.options.strokeColor,b.options.strokeOpacity),i.lineWidth=b.options.strokeWidth,i.beginPath(),e.renderShape(i,b.mapArea,c),i.closePath(),i.stroke(),i.restore())}),g?(c.globalCompositeOperation="source-out",c.drawImage(h,0,0),j.drawImage(b,0,0)):j.drawImage(h,0,0),e.active=!1,e.canvas},createCanvasFor:function(b){return a('<canvas width="'+b.scaleInfo.width+'" height="'+b.scaleInfo.height+'"></canvas>')[0]},clearHighlight:function(){var a=this.map_data.overlay_canvas;a.getContext("2d").clearRect(0,0,a.width,a.height)},refreshSelections:function(){var b,c=this.map_data;b=c.base_canvas,c.base_canvas=this.createVisibleCanvas(c),a(c.base_canvas).hide(),a(b).before(c.base_canvas),c.redrawSelections(),a(c.base_canvas).show(),a(b).remove()}},j={renderShape:function(b,c,d){var e=this,f,g,h,i,j,k,l,m=b.coords();j=e.elementName?'name="'+e.elementName+'" ':"",k=d?'class="'+d+'" ':"",i='<v:fill color="#'+c.fillColor+'" class="_fill" opacity="'+(c.fill?c.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+c.strokeOpacity+'"/>',g=c.stroke?" strokeweight="+c.strokeWidth+' stroked="t" strokecolor="#'+c.strokeColor+'"':' stroked="f"',f=c.fill?' filled="t"':' filled="f"';switch(b.shape){case"rect":l="<v:rect "+k+j+f+g+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+m[0]+"px;top:"+m[1]+"px;width:"+(m[2]-m[0])+"px;height:"+(m[3]-m[1])+'px;">'+i+"</v:rect>";break;case"poly":l="<v:shape "+k+j+f+g+' coordorigin="0,0" coordsize="'+e.width+","+e.height+'" path="m '+m[0]+","+m[1]+" l "+m.slice(2).join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+e.width+"px;height:"+e.height+'px;">'+i+"</v:shape>";break;case"circ":case"circle":l="<v:oval "+k+j+f+g+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(m[0]-m[2])+"px;top:"+(m[1]-m[2])+"px;width:"+m[2]*2+"px;height:"+m[2]*2+'px;">'+i+"</v:oval>"}return h=a(l),a(e.canvas).append(h),h},render:function(){var b,c=this;return a.each(this.shapes,function(a,b){c.renderShape(b.mapArea,b.options)}),this.masks.length&&a.each(this.masks,function(a,d){b=h.updateProps({},d.options,{fillOpacity:1,fillColor:d.options.fillColorMask}),c.renderShape(d.mapArea,b,"mapster_mask")}),this.active=!1,this.canvas},createCanvasFor:function(b){var c=b.scaleInfo.width,d=b.scaleInfo.height;return a('<var width="'+c+'" height="'+d+'" style="zoom:1;overflow:hidden;display:block;width:'+c+"px;height:"+d+'px;"></var>')[0]},clearHighlight:function(){a(this.map_data.overlay_canvas).children().remove()},removeSelections:function(b){b>=0?a(this.map_data.base_canvas).find('[name="static_'+b.toString()+'"]').remove():a(this.map_data.base_canvas).children().remove()}},a.each(["renderShape","addAltImage","render","createCanvasFor","clearHighlight","removeSelections","refreshSelections"],function(a,b){f[b]=function(a){return function(){return f[a]=(g.hasCanvas()?i[a]:j[a])||e,f[a].apply(this,arguments)}}(b)})}(jQuery),function(a){var b=a.mapster,c=b.utils,d=[];b.MapImages=function(a){this.owner=a,this.clear()},b.MapImages.prototype={constructor:b.MapImages,slice:function(){return d.slice.apply(this,arguments)},splice:function(){d.slice.apply(this.status,arguments);var a=d.slice.apply(this,arguments);return a},complete:function(){return a.inArray(!1,this.status)<0},_add:function(a){var b=d.push.call(this,a)-1;return this.status[b]=!1,b},indexOf:function(b){return a.inArray(b,this)},clear:function(){var b=this;b.ids&&b.ids.length>0&&a.each(b.ids,function(a,c){delete b[c]}),b.ids=[],b.length=0,b.status=[],b.splice(0)},add:function(b,c){var d,f,g=this;if(!b)return;if(typeof b=="string"){f=b,b=g[f];if(typeof b=="object")return g.indexOf(b);b=a("<img />").addClass("mapster_el").hide(),d=g._add(b[0]),b.bind("load",function(a){g.imageLoaded.call(g,a)}).bind("error",function(a){g.imageLoadError.call(g,a)}),b.attr("src",f)}else d=g._add(a(b)[0]);if(c){if(this[c])throw c+" is already used or is not available as an altImage alias.";g.ids.push(c),g[c]=g[d]}return d},bind:function(a){var b=this,d,e=b.owner.options.configTimeout/200,f=function(){var a;a=b.length;while(a-->0)if(!b.isLoaded(a))break;b.complete()?b.resolve():e-->0?b.imgTimeout=window.setTimeout(function(){f.call(b,!0)},50):b.imageLoadError.call(b)};return d=b.deferred=c.defer(),f(),d},resolve:function(){var a=this,b=a.deferred;b&&(a.deferred=null,b.resolve())},imageLoaded:function(b){var c=this,d=c.indexOf(b.target);d>=0&&(c.status[d]=!0,a.inArray(!1,c.status)<0&&c.resolve())},imageLoadError:function(a){clearTimeout(this.imgTimeout),this.triesLeft=0;var b=a?"The image "+a.target.src+" failed to load.":"The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load.";throw b},isLoaded:function(a){var b,d=this,e=d.status;return e[a]?!0:(b=d[a],typeof b.complete!="undefined"?e[a]=b.complete:e[a]=!!c.imgWidth(b),e[a])}}}(jQuery),function(a){function b(b){a.extend(b,{complete:!1,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null})}function c(a){return[a,a.render_highlight,a.render_select]}function d(b){var d=b.options,e=b.images;k.hasCanvas()&&(a.each(d.altImages||{},function(a,b){e.add(b,a)}),a.each([d].concat(d.areas),function(b,d){a.each(c(d),function(a,b){b&&b.altImage&&(b.altImageId=e.add(b.altImage))})})),b.area_options=l.updateProps({},k.area_defaults,d)}function e(a,b,c,d){function f(b){a.currentAreaId!==b&&a.highlightId>=0&&d.resolve()}d=d||l.when.defer(),a.activeAreaEvent&&(window.clearTimeout(a.activeAreaEvent),a.activeAreaEvent=0);if(b<0)return;return c.owner.currentAction||b?a.activeAreaEvent=window.setTimeout(function(){return function(){e(a,0,c,d)}}(c),b||100):f(c.areaId),d}function f(a){k.hasCanvas()||this.blur(),a.preventDefault()}function g(b,c){var d=b.getAllDataForArea(this),e=d.length?d[0]:null;if(!e||e.isNotRendered()||e.owner.currentAction)return;if(b.currentAreaId===e.areaId)return;b.highlightId!==e.areaId&&(b.clearEffects(),e.highlight(),b.options.showToolTip&&a.each(d,function(a,b){b.effectiveOptions().toolTip&&b.showToolTip()})),b.currentAreaId=e.areaId,a.isFunction(b.options.onMouseover)&&b.options.onMouseover.call(this,{e:c,options:e.effectiveOptions(),key:e.key,selected:e.isSelected()})}function h(b,c){var d,f=b.getDataForArea(this),g=b.options;if(b.currentAreaId<0||!f)return;d=b.getDataForArea(c.relatedTarget);if(d===f)return;b.currentAreaId=-1,f.area=null,e(b,g.mouseoutDelay,f).then(b.clearEffects),a.isFunction(g.onMouseout)&&g.onMouseout.call(this,{e:c,options:g,key:f.key,selected:f.isSelected()})}function i(b){var c=b.options;b.ensureNoHighlight(),c.toolTipClose&&a.inArray("area-mouseout",c.toolTipClose)>=0&&b.activeToolTip&&b.clearToolTip()}function j(b,c){function d(f){var p,u;j=f.isSelectable()&&(f.isDeselectable()||!f.isSelected()),j?i=!f.isSelected():i=f.isSelected(),h=k.getBoundList(q,f.key);if(a.isFunction(q.onClick)){m=q.onClick.call(o,{e:c,listTarget:h,key:f.key,selected:i});if(l.isBool(m)){if(!m)return!1;u=a(f.area).attr("href");if(u!=="#")return window.location.href=u,!1}}j&&(e=f.toggle()),q.boundList&&q.boundList.length>0&&k.setBoundListProperties(q,h,f.isSelected()),p=f.effectiveOptions(),p.includeKeys&&(g=l.split(p.includeKeys),a.each(g,function(a,c){var e=b.getDataForKey(c.toString());e.options.isMask||d(e)}))}var e,g,h,i,j,m,o=this,p=b.getDataForArea(this),q=b.options;f.call(this,c);if(q.clickNavigate&&p.href){window.location.href=p.href;return}p&&!p.owner.currentAction&&(q=b.options,d(p))}var k=a.mapster,l=k.utils;k.MapData=function(a,c){var d=this;d.image=a,d.images=new k.MapImages(d),d.graphics=new k.Graphics(d),d.imgCssText=a.style.cssText||null,b(d),d.configureOptions(c),d.mouseover=function(a){g.call(this,d,a)},d.mouseout=function(a){h.call(this,d,a)},d.click=function(a){j.call(this,d,a)},d.clearEffects=function(a){i.call(this,d,a)}},k.MapData.prototype={constructor:k.MapData,configureOptions:function(a){this.options=l.updateProps({},k.defaults,a)},bindImages:function(){var a=this,b=a.images;return b.length>2?b.splice(2):b.length===0&&(b.add(a.image),b.add(a.image.src)),d(a),a.images.bind()},isActive:function(){return!this.complete||this.currentAction},state:function(){return{complete:this.complete,resizing:this.currentAction==="resizing",zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo}},wrapId:function(){return"mapster_wrap_"+this.index},_idFromKey:function(a){return typeof a=="string"&&this._xref.hasOwnProperty(a)?this._xref[a]:-1},getSelected:function(){var b="";return a.each(this.data,function(a,c){c.isSelected()&&(b+=(b?",":"")+this.key)}),b},getAllDataForArea:function(b,c){var d,e,f,g=this,h=a(b).filter("area").attr(g.options.mapKey);if(h){f=[],h=l.split(h);for(d=0;d<(c||h.length);d++)e=g.data[g._idFromKey(h[d])],e.area=b.length?b[0]:b,f.push(e)}return f},getDataForArea:function(a){var b=this.getAllDataForArea(a,1);return b?b[0]||null:null},getDataForKey:function(a){return this.data[this._idFromKey(a)]},getKeysForGroup:function(a){var b=this.getDataForKey(a);return b?b.isPrimary?b.key:this.getPrimaryKeysForMapAreas(b.areas()).join(","):""},getPrimaryKeysForMapAreas:function(b){var c=[];return a.each(b,function(b,d){a.inArray(d.keys[0],c)<0&&c.push(d.keys[0])}),c},getData:function(a){return typeof a=="string"?this.getDataForKey(a):a&&a.mapster||l.isElement(a)?this.getDataForArea(a):null},ensureNoHighlight:function(){var a;this.highlightId>=0&&(this.graphics.clearHighlight(),a=this.data[this.highlightId],a.changeState("highlight",!1),this.setHighlightId(-1))},setHighlightId:function(a){this.highlightId=a},clearSelections:function(){a.each(this.data,function(a,b){b.selected&&b.deselect(!0)}),this.removeSelectionFinish()},setAreaOptions:function(a){var b,c,d;a=a||[];for(b=a.length-1;b>=0;b--)c=a[b],c&&(d=this.getDataForKey(c.key),d&&(l.updateProps(d.options,c),l.isBool(c.selected)&&(d.selected=c.selected)))},drawSelections:function(a){var b,c=l.asArray(a);for(b=c.length-1;b>=0;b--)this.data[c[b]].drawSelection()},redrawSelections:function(){a.each(this.data,function(a,b){b.isSelectedOrStatic()&&b.drawSelection()})},initialize:function(){var b,c,d,e,f,g,h,i,j,m,o,p,q=this,r=q.options;if(q.complete)return;j=a(q.image),f=j.parent().attr("id"),f&&f.length>=12&&f.substring(0,12)==="mapster_wrap"?(e=j.parent(),e.attr("id",q.wrapId())):(e=a('<div id="'+q.wrapId()+'"></div>'),r.wrapClass&&(r.wrapClass===!0?e.addClass(j[0].className):e.addClass(r.wrapClass))),q.wrapper=e,q.scaleInfo=p=l.scaleMap(q.images[0],q.images[1],r.scaleMap),q.base_canvas=c=q.graphics.createVisibleCanvas(q),q.overlay_canvas=d=q.graphics.createVisibleCanvas(q),b=a(q.images[1]).addClass("mapster_el "+q.images[0].className).attr({id:null,usemap:null}),i=l.size(q.images[0]),i.complete&&b.css({width:i.width,height:i.height}),q.buildDataset(),g={display:"block",position:"relative",padding:0,width:p.width,height:p.height},r.wrapCss&&a.extend(g,r.wrapCss),j.parent()[0]!==q.wrapper[0]&&j.before(q.wrapper),e.css(g),a(q.images.slice(2)).hide();for(h=1;h<q.images.length;h++)e.append(q.images[h]);e.append(c).append(d).append(j.css(k.canvas_style)),l.setOpacity(q.images[0],0),a(q.images[1]).show(),l.setOpacity(q.images[1],1),r.isSelectable&&r.onGetList&&(o=q.data.slice(0),r.sortList&&(r.sortList==="desc"?m=function(a,b){return a===b?0:a>b?-1:1}:m=function(a,b){return a===b?0:a<b?-1:1},o.sort(function(a,b){return a=a.value,b=b.value,m(a,b)})),q.options.boundList=r.onGetList.call(q.image,o)),q.complete=!0,q.processCommandQueue(),r.onConfigured&&typeof r.onConfigured=="function"&&r.onConfigured.call(j,!0)},buildDataset:function(b){function c(a,b){var c=new k.AreaData(s,a,b);return c.areaId=s._xref[a]=s.data.push(c)-1,c.areaId}var d,e,f,g,h,i,j,l,m,n,o,p,q,r,s=this,u=s.options,v;s._xref={},s.data=[],b||(s.mapAreas=[]),v=!u.mapKey,v&&(u.mapKey="data-mapster-key"),d=k.hasVml()?"area":v?"area[coords]":"area["+u.mapKey+"]",e=a(s.map).find(d).unbind(".mapster");for(o=0;o<e.length;o++){g=0,i=e[o],h=a(i);if(!i.coords)continue;v?(j=String(o),h.attr("data-mapster-key",j)):j=i.getAttribute(u.mapKey),b?(l=s.mapAreas[h.data("mapster")-1],l.configure(j)):(l=new k.MapArea(s,i,j),s.mapAreas.push(l)),n=l.keys;for(f=n.length-1;f>=0;f--)m=n[f],u.mapValue&&(p=h.attr(u.mapValue)),v?(g=c(s.data.length,p),q=s.data[g],q.key=m=g.toString()):(g=s._xref[m],g>=0?(q=s.data[g],p&&!s.data[g].value&&(q.value=p)):(g=c(m,p),q=s.data[g],q.isPrimary=f===0)),l.areaDataXref.push(g),q.areasXref.push(o);r=h.attr("href"),r&&r!=="#"&&!q.href&&(q.href=r),l.nohref||(h.bind("click.mapster",s.click),k.isTouch||h.bind("mouseover.mapster",s.mouseover).bind("mouseout.mapster",s.mouseout).bind("mousedown.mapster",s.mousedown)),h.data("mapster",o+1)}s.setAreaOptions(u.areas),s.redrawSelections()},processCommandQueue:function(){var a,b=this;while(!b.currentAction&&b.commands.length)a=b.commands[0],b.commands.splice(0,1),k.impl[a.command].apply(a.that,a.args)},clearEvents:function(){a(this.map).find("area").unbind(".mapster"),a(this.images).unbind(".mapster")},_clearCanvases:function(b){b||a(this.base_canvas).remove(),a(this.overlay_canvas).remove()},clearMapData:function(b){var c=this;this._clearCanvases(b),a.each(this.data,function(a,b){b.reset()}),this.data=null,b||(this.image.style.cssText=this.imgCssText,a(this.wrapper).before(this.image).remove()),c.images.clear(),this.image=null,l.ifFunction(this.clearTooltip,this)},removeSelectionFinish:function(){var a=this.graphics;a.refreshSelections(),a.clearHighlight()}}}(jQuery),function(a){function b(b){var c=this,d=c.owner;d.options.singleSelect&&d.clearSelections(),c.isSelected()||(b&&(c.optsCache=a.extend(c.effectiveRenderOptions("select"),b,{altImageId:d.images.add(b.altImage)})),c.drawSelection(),c.selected=!0,c.changeState("select",!0)),d.options.singleSelect&&d.graphics.refreshSelections()}function c(a){var b=this;b.selected=!1,b.changeState("select",!1),b.optsCache=null,b.owner.graphics.removeSelections(b.areaId),a||b.owner.removeSelectionFinish()}function d(a){var b=this;return b.isSelected()?b.deselect():b.select(a),b.isSelected()}var e=a.mapster,f=e.utils;e.AreaData=function(b,c,d){a.extend(this,{owner:b,key:c||"",isPrimary:!0,areaId:-1,href:"",value:d||"",options:{},selected:null,areasXref:[],area:null,optsCache:null})},e.AreaData.prototype={constuctor:e.AreaData,select:b,deselect:c,toggle:d,areas:function(){var a,b=[];for(a=0;a<this.areasXref.length;a++)b.push(this.owner.mapAreas[this.areasXref[a]]);return b},coords:function(b){var c=[];return a.each(this.areas(),function(a,d){c=c.concat(d.coords(b))}),c},reset:function(){a.each(this.areas(),function(a,b){b.reset()}),this.areasXref=[],this.options=null},isSelectedOrStatic:function(){var a=this.effectiveOptions();return f.isBool(a.staticState)?a.staticState:this.isSelected()},isSelected:function(){return f.isBool(this.selected)?this.selected:f.isBool(this.owner.area_options.selected)?this.owner.area_options.selected:!1},isSelectable:function(){return f.isBool(this.effectiveOptions().staticState)?!1:f.isBool(this.owner.options.staticState)?!1:f.boolOrDefault(this.effectiveOptions().isSelectable,!0)},isDeselectable:function(){return f.isBool(this.effectiveOptions().staticState)?!1:f.isBool(this.owner.options.staticState)?!1:f.boolOrDefault(this.effectiveOptions().isDeselectable,!0)},isNotRendered:function(){var b=a(this.area);return b.attr("nohref")||!b.attr("href")||this.effectiveOptions().isMask},effectiveOptions:function(a){var b=f.updateProps({},this.owner.area_options,this.options,a||{},{id:this.areaId});return b.selected=this.isSelected(),b},effectiveRenderOptions:function(b,c){var d,e=this.optsCache;if(!e||b==="highlight")d=this.effectiveOptions(c),e=f.updateProps({},d,d["render_"+b]),b!=="highlight"&&(this.optsCache=e);return a.extend({},e)},changeState:function(b,c){a.isFunction(this.owner.options.onStateChange)&&this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:b,selected:c})},highlight:function(a){var b=this.owner;this.effectiveOptions().highlight&&b.graphics.addShapeGroup(this,"highlight",a),b.setHighlightId(this.areaId),this.changeState("highlight",!0)},drawSelection:function(){this.owner.graphics.addShapeGroup(this,"select")}},e.MapArea=function(b,c,d){if(!b)return;var e=this;e.owner=b,e.area=c,e.areaDataXref=[],e.originalCoords=[],a.each(f.split(c.coords),function(a,b){e.originalCoords.push(parseFloat(b))}),e.length=e.originalCoords.length,e.shape=c.shape.toLowerCase(),e.nohref=c.nohref||!c.href,e.configure(d)},e.MapArea.prototype={constructor:e.MapArea,configure:function(a){this.keys=f.split(a)},reset:function(){this.area=null},coords:function(b){return a.map(this.originalCoords,function(a){return b?a:a+b})}}}(jQuery),function(a){var b=a.mapster.utils;b.areaCorners=function(c,d,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,u,v,w,x=0,y=0,z,A,B,C,D,E,F=[];c=c.length?c:[c],f=f?a(f):a(document.body),i=f.offset(),z=i.left,A=i.top,d&&(i=a(d).offset(),x=i.left,y=i.top);for(w=0;w<c.length;w++){E=c[w];if(E.nodeName==="AREA"){B=b.split(E.coords,parseInt);switch(E.shape){case"circle":s=B[0],u=B[1],C=B[2],F=[];for(w=0;w<360;w+=20)D=w*Math.PI/180,F.push(s+C*Math.cos(D),u+C*Math.sin(D));break;case"rect":F.push(B[0],B[1],B[2],B[1],B[2],B[3],B[0],B[3]);break;default:F=F.concat(B)}for(w=0;w<F.length;w+=2)F[w]=parseInt(F[w],10)+x,F[w+1]=parseInt(F[w+1],10)+y}else E=a(E),i=E.position(),F.push(i.left,i.top,i.left+E.width(),i.top,i.left+E.width(),i.top+E.height(),i.left,i.top+E.height())}k=l=o=q=999999,m=n=p=r=-1;for(w=F.length-2;w>=0;w-=2)s=F[w],u=F[w+1],s<k&&(k=s,r=u),s>m&&(m=s,q=u),u<l&&(l=u,p=s),u>n&&(n=u,o=s);return g&&h&&(j=!1,a.each([[p-g,l-h],[o,l-h],[k-g,r-h],[k-g,q],[m,r-h],[m,q],[p-g,n],[o,n]],function(a,b){if(!j&&b[0]>z&&b[1]>A)return v=b,j=!0,!1}),j||(v=[m,n])),v}}(jQuery),function(a){var b=a.mapster,c=b.utils,d=b.MapArea.prototype;b.utils.getScaleInfo=function(a,b){var c;return b?(c=a.width/b.width||a.height/b.height,c>.98&&c<1.02&&(c=1)):(c=1,b=a),{scale:c!==1,scalePct:c,realWidth:b.width,realHeight:b.height,width:a.width,height:a.height,ratio:a.width/a.height}},b.utils.scaleMap=function(a,b,d){var e=c.size(a),f=c.size(b,!0);if(!f.complete())throw"Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.";return e.complete()||(e=f),this.getScaleInfo(e,d?f:null)},b.MapData.prototype.resize=function(d,f,g,h){function i(c,d,f){b.hasCanvas()?(c.width=d,c.height=f):(a(c).width(d),a(c).height(f))}function j(){u.currentAction="",a.isFunction(h)&&h(),u.processCommandQueue()}function k(){i(u.overlay_canvas,d,f);if(r>=0){var a=u.data[r];a.tempOptions={fade:!1},u.getDataForKey(a.key).highlight(),a.tempOptions=null}i(u.base_canvas,d,f),u.redrawSelections(),j()}function l(){a(u.image).css(p),u.scaleInfo=c.getScaleInfo({width:d,height:f},{width:u.scaleInfo.realWidth,height:u.scaleInfo.realHeight}),a.each(u.data,function(b,c){a.each(c.areas(),function(a,b){b.resize()})})}var m,o,p,q,r,s,u=this;h=h||g;if(u.scaleInfo.width===d&&u.scaleInfo.height===f)return;r=u.highlightId,d||(s=f/u.scaleInfo.realHeight,d=Math.round(u.scaleInfo.realWidth*s)),f||(s=d/u.scaleInfo.realWidth,f=Math.round(u.scaleInfo.realHeight*s)),p={width:String(d)+"px",height:String(f)+"px"},b.hasCanvas()||a(u.base_canvas).children().remove(),q=a(u.wrapper).find(".mapster_el").add(u.wrapper),g?(o=[],u.currentAction="resizing",q.each(function(b,d){m=c.defer(),o.push(m),a(d).animate(p,{duration:g,complete:m.resolve,easing:"linear"})}),m=c.defer(),o.push(m),c.when.all(o).then(k),l(),m.resolve()):(q.css(p),l(),k())},b.MapArea=c.subclass(b.MapArea,function(){this.base.init(),this.owner.scaleInfo.scale&&this.resize()}),d.coords=function(a,b){var c,d=[],e=a||this.owner.scaleInfo.scalePct,f=b||0;if(e===1&&b===0)return this.originalCoords;for(c=0;c<this.length;c++)d.push(Math.round(this.originalCoords[c]*e)+f);return d},d.resize=function(){this.area.coords=this.coords().join(",")},d.reset=function(){this.area.coords=this.coords(1).join(",")},b.impl.resize=function(a,c,d,e){if(!a&&!c)return!1;var f=(new b.Method(this,function(){this.resize(a,c,d,e)},null,{name:"resize",args:arguments})).go();return f}}(jQuery),function(a){function b(b,c,d){var e;return c?(e=typeof c=="string"?a(c):a(c).clone(),e.append(b)):e=a(b),e.css(a.extend(d||{},{display:"block",position:"absolute"})).hide(),a("body").append(e),e.attr("data-opacity",e.css("opacity")).css("opacity",0),e.show()}function c(a,b){var c={left:b.left+"px",top:b.top+"px"},d=a.attr("data-opacity")||0,e=a.css("z-index");if(parseInt(e,10)===0||e==="auto")c["z-index"]=9999;a.css(c).addClass("mapster_tooltip"),b.fadeDuration&&b.fadeDuration>0?h.fader(a[0],0,d,b.fadeDuration):h.setOpacity(a[0],d)}function d(b,c,d,e,f,g){var h=d+".mapster-tooltip";if(a.inArray(c,b)>=0)return e.unbind(h).bind(h,function(a){if(!f||f.call(this,a))e.unbind(".mapster-tooltip"),g&&g.call(this)}),{object:e,event:h}}function e(a,b,d,e,f){var g,j={};return f=f||{},b?(g=h.areaCorners(b,d,e,a.outerWidth(!0),a.outerHeight(!0)),j.left=g[0],j.top=g[1]):(j.left=f.left,j.top=f.top),j.left+=f.offsetx||0,j.top+=f.offsety||0,j.css=f.css,j.fadeDuration=f.fadeDuration,c(a,j),a}function f(a){return a?typeof a=="string"||a.jquery?a:a.content:null}var g=a.mapster,h=g.utils;a.extend(g.defaults,{toolTipContainer:'<div style="border: 2px solid black; background: #EEEEEE; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; -webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; border-radius: 6px 6px 6px 6px; opacity: 0.9;"></dteniv>',showToolTip:!1,toolTipFade:!0,toolTipClose:["area-mouseout","image-mouseout"],onShowToolTip:null,onHideToolTip:null}),a.extend(g.area_defaults,{toolTip:null,toolTipClose:null}),g.MapData.prototype.clearToolTip=function(){this.activeToolTip&&(this.activeToolTip.stop().remove(),this.activeToolTip=null,this.activeToolTipID=null,h.ifFunction(this.options.onHideToolTip,this))},g.AreaData.prototype.showToolTip=function(c,f){var g,i,j,k,l,m={},p=this,q=p.owner,t=p.effectiveOptions();f=f?a.extend({},f):{},c=c||t.toolTip,i=f.closeEvents||t.toolTipClose||q.options.toolTipClose||"tooltip-click",l=typeof f.template!="undefined"?f.template:q.options.toolTipContainer,f.closeEvents=typeof i=="string"?i=h.split(i):i,f.fadeDuration=f.fadeDuration||(q.options.toolTipFade?q.options.fadeDuration||t.fadeDuration:0),j=p.area?p.area:a.map(p.areas(),function(a){return a.area});if(q.activeToolTipID===p.areaId)return;return q.clearToolTip(),q.activeToolTip=g=b(c,l,f.css),q.activeToolTipID=p.areaId,k=function(){q.clearToolTip()},d(i,"area-click","click",a(q.map),null,k),d(i,"tooltip-click","click",g,null,k),d(i,"image-mouseout","mouseout",a(q.image),function(a){return a.relatedTarget&&a.relatedTarget.nodeName!=="AREA"&&a.relatedTarget!==p.area},k),e(g,j,q.image,f.container,l,f),h.ifFunction(q.options.onShowToolTip,p.area,{toolTip:g,options:m,areaOptions:t,key:p.key,selected:p.isSelected()}),g},g.impl.tooltip=function(c,h){return(new g.Method(this,function(){var g,j,k=this;if(!c)k.clearToolTip();else{j=a(c);if(k.activeToolTipID===j[0])return;k.clearToolTip(),k.activeToolTip=g=b(f(h),h.template||k.options.toolTipContainer,h.css),k.activeToolTipID=j[0],d(["tooltip-click"],"tooltip-click","click",g,null,function(){k.clearToolTip()}),k.activeToolTip=g=e(g,j,k.image,h.container,h)}},function(){a.isPlainObject(c)&&!h&&(h=c),this.showToolTip(f(h),h)},{name:"tooltip",args:arguments,key:c})).go()}}(jQuery),function(a){var b={on:a.fn.on,bind:a.fn.bind};a.each(b,function(c){a.fn[c]=function(){var a=[].slice.call(arguments),d=a.pop(),e=a.pop(),f;return a.push(function(){var a=this,b=arguments;clearTimeout(f),f=setTimeout(function(){e.apply(a,[].slice.call(b))},d)}),b[c].apply(this,isNaN(d)?arguments:a)}})}(jQuery);